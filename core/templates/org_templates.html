<!DOCTYPE html>
<html>
<head>
    <title>Message Templates - {{ organization.name }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-4">
    <h1>Message Templates for {{ organization.name }}</h1>
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label">Template Name</label>
            <input type="text" name="name" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Content</label>
            <textarea name="content" class="form-control" rows="3" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Create Template</button>
        <a href="{% url 'org_dashboard' organization.slug %}" class="btn btn-secondary">Back</a>
    </form>

    <hr>
    <h3>Existing Templates</h3>
    <ul class="list-group">
        {% for t in templates %}
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div>
                    <strong>{{ t.name }}</strong> â€” {{ t.content }} <br>
                    <small class="text-muted">Created: {{ t.created_at|date:'Y-m-d H:i' }}</small>
                </div>
                <div>
                    <a href="{% url 'org_template_edit' organization.slug t.id %}" class="btn btn-sm btn-outline-primary me-2">Edit</a>
                    <a href="{% url 'org_template_delete' organization.slug t.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
                </div>
            </li>
        {% empty %}
            <li class="list-group-item">No templates yet.</li>
        {% endfor %}
    </ul>
</div>
</body>
</html>

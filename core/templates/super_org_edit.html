{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Edit Organization Settings</title>
</head>
<body>
<div class="container mt-4">
    <div class="mb-3">
        <a href="{% url 'dashboard' %}">
            <img src="{% static 'images/cedcast_logo.png' %}" alt="CedCast" style="height:48px">
        </a>
    </div>
    <a href="{% url 'dashboard' %}" class="btn btn-secondary mb-3">Back to Dashboard</a>
    <h2>Edit {{ org.name }}</h2>
    {% if notice %}
        <div class="alert alert-success">{{ notice }}</div>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label">Hubtel API URL</label>
            <input class="form-control" name="hubtel_api_url" value="{{ org.hubtel_api_url|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Hubtel Client ID</label>
            <input class="form-control" name="hubtel_client_id" value="{{ org.hubtel_client_id|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Hubtel Client Secret</label>
            <input class="form-control" name="hubtel_client_secret" placeholder="Leave blank to keep existing secret" value="{% if hubtel_secret_present %}********{% else %}{% endif %}">
            {% if hubtel_secret_present %}
                <div class="form-text">A Hubtel client secret is stored (masked). Enter a new value to replace it.</div>
            {% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label">Hubtel API Key</label>
            <input class="form-control" name="hubtel_api_key" placeholder="Leave blank to keep existing key" value="{% if hubtel_secret_present %}********{% else %}{% endif %}">
            {% if hubtel_secret_present %}
                <div class="form-text">A Hubtel API key is stored (masked). Enter a new value to replace it.</div>
            {% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label">Hubtel Sender ID</label>
            <input class="form-control" name="hubtel_sender_id" placeholder="Leave blank to keep existing sender id" value="{{ org.hubtel_sender_id|default_if_none:'' }}">
            {% if hubtel_secret_present %}
                <div class="form-text">A Hubtel sender id is stored. Enter a new value to replace it.</div>
            {% endif %}
        </div>
        <hr />
        <div class="mb-3">
            <label class="form-label">ClickSend Username</label>
            <input class="form-control" name="clicksend_username" value="{{ org.clicksend_username|default_if_none:'' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">ClickSend API Key</label>
            <input class="form-control" name="clicksend_api_key" placeholder="Leave blank to keep existing key" value="{% if clicksend_key_present %}********{% else %}{% endif %}">
            {% if clicksend_key_present %}
                <div class="form-text">A ClickSend API key is stored (masked). Enter a new value to replace it.</div>
            {% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label">Sender ID</label>
            <input class="form-control" name="sender_id" placeholder="Leave blank to keep existing sender id" value="{{ org.sender_id|default_if_none:'' }}">
            {% if sender_present %}
                <div class="form-text">A sender id is stored. Enter a new value to replace it.</div>
            {% endif %}
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="onboarded" name="onboarded" {% if org.onboarded %}checked{% endif %}>
            <label class="form-check-label" for="onboarded">Onboarded</label>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if org.is_active %}checked{% endif %}>
            <label class="form-check-label" for="is_active">Active</label>
        </div>
        <button class="btn btn-primary" type="submit">Save</button>
    </form>
</div>
</body>
</html>

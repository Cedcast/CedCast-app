{% extends 'base.html' %}
{% load static %}

{% block title %}Sign Up - CedCast{% endblock %}

{% block body_class %}signup-page{% endblock %}

{% block extra_head %}
<style>
.signup-form {
    max-width: 600px;
    margin: 0 auto;
}
.form-section {
    background: white;
    border-radius: 10px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
.section-title {
    color: #495057;
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
}
.btn-signup {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 0.75rem 2rem;
    font-size: 1.1rem;
}
.btn-signup:hover {
    background: linear-gradient(135deg, #5a67d8 0%, #6c5b7b 100%);
}
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="text-center mb-5">
                <img src="{% static 'images/cedcast_logo.png' %}" alt="CedCast" style="height:60px; margin-bottom:1rem;" onerror="this.style.display='none'">
                <h1 class="display-5 fw-bold text-primary">Join CedCast</h1>
                <p class="lead text-muted">Start sending SMS alerts to your organization in minutes</p>
            </div>

            {% if error %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ error }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endif %}

            <form method="post" class="signup-form">
                {% csrf_token %}

                <!-- Organization Information -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="bi bi-building me-2"></i>Organization Details
                    </h3>

                    <div class="row mb-3">
                        <div class="col-md-8">
                            <label for="name" class="form-label">Organization Name *</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                            <div class="form-text">Your organization's official name</div>
                        </div>
                        <div class="col-md-4">
                            <label for="org_type" class="form-label">Type *</label>
                            <select class="form-select" id="org_type" name="org_type" required>
                                <option value="">Select type</option>
                                <option value="company">Company</option>
                                <option value="school">School</option>
                                <option value="ngo">NGO</option>
                                <option value="pharmacy">Pharmacy</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label">Address *</label>
                        <textarea class="form-control" id="address" name="address" rows="3" required></textarea>
                        <div class="form-text">Complete address including city and region</div>
                    </div>

                    <div class="mb-3">
                        <label for="phone_primary" class="form-label">Primary Phone Number *</label>
                        <input type="tel" class="form-control" id="phone_primary" name="phone_primary" placeholder="+233501234567" required>
                        <div class="form-text">Main contact number for your organization</div>
                    </div>
                </div>

                <!-- Administrator Information -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="bi bi-person-badge me-2"></i>Administrator Details
                    </h3>

                    <div class="mb-3">
                        <label for="admin_name" class="form-label">Full Name *</label>
                        <input type="text" class="form-control" id="admin_name" name="admin_name" required>
                        <div class="form-text">Name of the person who will manage this account</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="admin_email" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="admin_email" name="admin_email" required>
                            <div class="form-text">Will be used as login username</div>
                        </div>
                        <div class="col-md-6">
                            <label for="admin_phone" class="form-label">Phone Number *</label>
                            <input type="tel" class="form-control" id="admin_phone" name="admin_phone" placeholder="+233501234567" required>
                            <div class="form-text">Personal contact number</div>
                        </div>
                    </div>
                </div>

                <!-- Terms and Submit -->
                <div class="form-section">
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="terms" required>
                            <label class="form-check-label" for="terms">
                                I agree to the <a href="#" target="_blank">Terms of Service</a> and <a href="#" target="_blank">Privacy Policy</a>
                            </label>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg btn-signup">
                            <i class="bi bi-rocket-takeoff me-2"></i>Create Organization Account
                        </button>
                    </div>

                    <div class="text-center mt-3">
                        <small class="text-muted">
                            Already have an account? <a href="{% url 'login' %}">Sign in here</a>
                        </small>
                    </div>
                </div>
            </form>

            <!-- Features Preview -->
            <div class="row mt-5 text-center">
                <div class="col-md-4">
                    <i class="bi bi-lightning-charge text-warning" style="font-size: 2rem;"></i>
                    <h5 class="mt-2">Quick Setup</h5>
                    <p class="text-muted small">Get started in under 10 minutes</p>
                </div>
                <div class="col-md-4">
                    <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                    <h5 class="mt-2">Secure & Reliable</h5>
                    <p class="text-muted small">Enterprise-grade security</p>
                </div>
                <div class="col-md-4">
                    <i class="bi bi-headset text-primary" style="font-size: 2rem;"></i>
                    <h5 class="mt-2">24/7 Support</h5>
                    <p class="text-muted small">Dedicated customer support</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Form validation
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const phoneInputs = document.querySelectorAll('input[type="tel"]');

    // Phone number validation
    phoneInputs.forEach(input => {
        input.addEventListener('input', function() {
            // Remove any non-digit characters except +
            this.value = this.value.replace(/[^\d+]/g, '');
        });
    });

    // Form submission
    form.addEventListener('submit', function(e) {
        const termsCheckbox = document.getElementById('terms');
        if (!termsCheckbox.checked) {
            e.preventDefault();
            alert('Please agree to the Terms of Service and Privacy Policy.');
            return false;
        }
    });
});
</script>

{% endblock %}
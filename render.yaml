# Minimal Render service configuration for the Django app
services:
  - type: web
    name: school-alert-web
    env: python
    plan: free
    buildCommand: pip install -r requirements_clicksend.txt && python manage.py migrate --noinput && python manage.py collectstatic --noinput
    startCommand: bash ./scripts/start_gunicorn.sh
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: school_alert_system.settings
      - key: DEBUG
        value: 'False'
      - key: HUBTEL_DRY_RUN
        value: 'false'
      - key: DATABASE_URL
        sync: false
      - key: SUPERADMIN_USERNAME
        value: superadmin
      - key: SUPERADMIN_PASSWORD
        sync: false
      - key: ORGADMIN_USERNAME
        value: packnet_admin
      - key: ORGADMIN_PASSWORD
        sync: false
      - key: DEFAULT_ORG_SLUG
        value: packnet
  - type: worker
    name: school-alert-scheduler
    env: python
    plan: free
    startCommand: python3 manage.py run_scheduler --interval 60 --limit 200
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: school_alert_system.settings
      - key: SCHEDULER_INTERVAL
        value: '60'
